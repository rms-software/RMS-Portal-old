(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-137931b3"],{"40ba":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"profile"}},[a("Box",{staticClass:"login-credentials",attrs:{title:"Login settings",collapsable:""}},[a("div",{staticClass:"login-credential"},[e._v(" Username "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.credentialsSettings.username,expression:"credentialsSettings.username"}],attrs:{type:"text"},domProps:{value:e.credentialsSettings.username},on:{input:function(t){t.target.composing||e.$set(e.credentialsSettings,"username",t.target.value)}}})]),a("div",{staticClass:"login-credential"},[e._v(" Password "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.credentialsSettings.password,expression:"credentialsSettings.password"}],attrs:{type:"password"},domProps:{value:e.credentialsSettings.password},on:{input:function(t){t.target.composing||e.$set(e.credentialsSettings,"password",t.target.value)}}})]),a("div",{staticClass:"login-credential"},[e._v(" Confirm password "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}})]),a("div",{staticClass:"login-credentials-save"},[a("button",{staticClass:"main",on:{click:e.updateCredentialsSettings}},[e._v("Save")])])]),a("Box",{attrs:{title:"Profile settings",collapsable:""}},[a("div",{staticClass:"profile-settings"},[a("div",{staticClass:"textual-settings"},[a("div",{staticClass:"profile-setting"},[e._v(" Firstname "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.profileSettings.firstName,expression:"profileSettings.firstName"}],attrs:{type:"text"},domProps:{value:e.profileSettings.firstName},on:{input:function(t){t.target.composing||e.$set(e.profileSettings,"firstName",t.target.value)}}})]),a("div",{staticClass:"profile-setting"},[e._v(" Lastname "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.profileSettings.lastName,expression:"profileSettings.lastName"}],attrs:{type:"text"},domProps:{value:e.profileSettings.lastName},on:{input:function(t){t.target.composing||e.$set(e.profileSettings,"lastName",t.target.value)}}})]),a("div",{staticClass:"profile-setting"},[e._v(" Email address "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.profileSettings.email,expression:"profileSettings.email"}],attrs:{type:"text"},domProps:{value:e.profileSettings.email},on:{input:function(t){t.target.composing||e.$set(e.profileSettings,"email",t.target.value)}}})]),a("div",{staticClass:"profile-setting"},[e._v(" address "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.profileSettings.address,expression:"profileSettings.address"}],attrs:{type:"text"},domProps:{value:e.profileSettings.address},on:{input:function(t){t.target.composing||e.$set(e.profileSettings,"address",t.target.value)}}})])]),a("div",{staticClass:"profile-pic-uploader"},[a("ImageUploader",{ref:"image-uploader",model:{value:e.profileSettings.profilePicture,callback:function(t){e.$set(e.profileSettings,"profilePicture",t)},expression:"profileSettings.profilePicture"}})],1)]),a("div",{staticClass:"login-credentials-save"},[a("button",{staticClass:"main",on:{click:e.updateProfileInfo}},[e._v("Save")])])])],1)},n=[],s=a("1da1"),r=(a("99af"),a("96cf"),a("b715")),o=a("bf2e"),l=a("2152"),c=a("5ce5"),d={updateProfileInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].post("profile/info",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateProfileCredentials:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].post("profile/credentials",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},u=a("f5ef"),p={components:{Box:r["a"],ImageUploader:o["a"],GeneralService:l["a"]},data:function(){return{confirmPassword:"",profileSettings:{firstName:"",lastName:"",email:"",address:"",profilePicture:""},credentialsSettings:{username:"",password:""}}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].getGeneralInfo();case 2:a=t.sent,e.profileSettings={firstName:a.firstName,lastName:a.lastName,email:a.emailAddress,address:a.address,profilePicture:a.profilePicture};case 4:case"end":return t.stop()}}),t)})))()},methods:{updateCredentialsSettings:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.credentialsSettings.password===e.confirmPassword){t.next=4;break}notifications.add("error","Confirm password does not match password"),t.next=8;break;case 4:return t.next=6,d.updateProfileCredentials(e.credentialsSettings);case 6:a=t.sent,void 0!==a&&(i=btoa("".concat(e.credentialsSettings.username,":").concat(e.credentialsSettings.password)),localStorage.setItem("authHeader",i),notifications.add("info","Login updated"));case 8:case"end":return t.stop()}}),t)})))()},updateProfileInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.updateProfileInfo(e.profileSettings);case 2:a=t.sent,void 0!==a?(notifications.add("info","Profile settings successfully updated"),u["a"].$emit("refreshGeneralInfo")):notifications.add("error","Something went wrong while updating profile settings");case 4:case"end":return t.stop()}}),t)})))()}}},f=p,g=(a("cf36"),a("2877")),m=Object(g["a"])(f,i,n,!1,null,"54eaa348",null);t["default"]=m.exports},5047:function(e,t,a){"use strict";a("a732")},a5c2:function(e,t,a){},a732:function(e,t,a){},ae2d:function(e,t,a){},b715:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"box"}},[a("div",{attrs:{id:"box-title"},on:{click:e.toggleCollapse}},[e._v(" "+e._s(e.title)+" "),e.collapsable?a("span",{class:{collapsed:e.isCollapsed},attrs:{id:"collapser"}},[a("unicon",{attrs:{name:"angle-double-up"}})],1):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsed,expression:"!isCollapsed"}],attrs:{id:"box-body"}},[e._t("default")],2)])},n=[],s={props:{title:{type:String,default:""},collapsable:{type:Boolean,default:!1}},data:function(){return{isCollapsed:!1}},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed}}},r=s,o=(a("e105"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"2c986695",null);t["a"]=l.exports},bf2e:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"image-uploader",attrs:{type:"file",id:"actual-btn",hidden:""}}),a("div",{staticClass:"image-picker-overlay box",style:"background: url("+e.value+") no-repeat;",on:{click:e.pickImage}},[a("unicon",{staticClass:"content",attrs:{name:"camera"}})],1)])},n=[];a("96cf");const s=e=>{const t=e.replace(/^data:image\/\w+;base64,/,"").length;return(t-814)/1.37},r=e=>e.split(";")[0].match(/jpeg|png|gif/)[0],o=e=>e.replace(/^data:image\/\w+;base64,/,""),l=e=>`data:${e};base64,`;var c={size:s,mime:r,data:o,prefix:l};const d=(e,t="image/jpeg")=>{const a=window.atob(e),i=[];for(let n=0;n<a.length;n++)i[n]=a.charCodeAt(n);return new window.Blob([new Uint8Array(i)],{type:t})},u=(e,t,a)=>{const i=document.createElement("canvas"),n=i.getContext("2d");return i.width=e,i.height=t,s=>{if(!a||a>8)return n.drawImage(s,0,0,i.width,i.height),i;switch(a>4&&(i.width=t,i.height=e),a){case 2:n.translate(e,0),n.scale(-1,1);break;case 3:n.translate(e,t),n.rotate(Math.PI);break;case 4:n.translate(0,t),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-t);break;case 7:n.rotate(.5*Math.PI),n.translate(e,-t),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-e,0);break}return a>4?n.drawImage(s,0,0,i.height,i.width):n.drawImage(s,0,0,i.width,i.height),i}},p=(e,t=.75)=>{const a=e.toDataURL("image/jpeg",t);return a},f=e=>({KB:e/1e3,MB:e/1e6});var g={base64ToFile:d,imageToCanvas:u,canvasToBase64:p,size:f};const m=e=>new Promise((t,a)=>{const i=new window.FileReader;i.addEventListener("load",e=>t(e.target.result),!1),i.addEventListener("error",a,!1),i.readAsDataURL(e)});var h={load:m};const v=e=>new Promise((t,a)=>{const i=new window.Image;i.addEventListener("load",()=>t(i),!1),i.addEventListener("error",a,!1),i.src=e}),w=(e,t)=>(a,i)=>{if(!e&&!t)return{width:a,height:i};const n=a/i,s=e/t;let r,o;return n>s?(r=Math.min(a,e),o=r/n):(o=Math.min(i,t),r=o*n),{width:r,height:o}};var b={load:v,resize:w};class x{constructor({quality:e=.75,size:t=2,maxWidth:a=1920,maxHeight:i=1920,resize:n=!0,rotate:s=!1}){this.start=window.performance.now(),this.end=null,this.alt=null,this.ext=null,this.startSize=null,this.startWidth=null,this.startHeight=null,this.size=1e3*t*1e3,this.endSize=null,this.endWidth=null,this.endHeight=null,this.iterations=0,this.base64prefix=null,this.quality=e,this.resize=n,this.maxWidth=a,this.maxHeight=i,this.orientation=1,this.rotate=s}}var S=x;const P=e=>new Promise(t=>{const a=new window.FileReader;a.onload=function(e){var a=new DataView(e.target.result);65496!==a.getUint16(0,!1)&&t(-2);const i=a.byteLength;let n=2;while(n<i){const e=a.getUint16(n,!1);if(n+=2,65505===e){1165519206!==a.getUint32(n+=2,!1)&&t(-1);const e=18761===a.getUint16(n+=6,!1);n+=a.getUint32(n+4,e);const i=a.getUint16(n,e);n+=2;for(let s=0;s<i;s++)274===a.getUint16(n+12*s,e)&&t(a.getUint16(n+12*s+8,e))}else{if(65280!==(65280&e))break;n+=a.getUint16(n,!1)}}t(-1)},a.readAsArrayBuffer(e.slice(0,65536))});var C={orientation:P};class y{attach(e,t){return new Promise(a=>{const i=document.querySelector(e);i.setAttribute("accept","image/*"),i.addEventListener("change",e=>{const i=this.compress([...e.target.files],t);a(i)},!1)})}compress(e,t){return Promise.all(e.map(e=>k(e,t)))}static convertBase64ToFile(e,t){return g.base64ToFile(e,t)}}function z(e,t,a=1,i,n=1,s=1){const r=g.canvasToBase64(e,a),o=c.size(r);return o>i||a>n?z(e,o,a-.1,i,n,s+1):r}async function k(e,t){const a=new S(t);return a.start=window.performance.now(),a.alt=e.name,a.ext=e.type,a.startSize=e.size,a.orientation=a.rotate?await C.orientation(e):0,I(a)(await h.load(e))}function I(e){return async t=>{const a=await b.load(t);if(e.startWidth=a.naturalWidth,e.startHeight=a.naturalHeight,e.resize){const{width:t,height:i}=b.resize(e.maxWidth,e.maxHeight)(a.naturalWidth,a.naturalHeight);e.endWidth=t,e.endHeight=i}else e.endWidth=a.naturalWidth,e.endHeight=a.naturalHeight;const i=g.imageToCanvas(e.endWidth,e.endHeight,e.orientation)(a);e.iterations=1,e.base64prefix=c.prefix(e.ext);const n=await z(i,e.startSize,e.quality,e.size,e.minQuality,e.iterations);e.finalSize=c.size(n),e.end=window.performance.now();const s=e.end-e.start;return{data:c.data(n),prefix:e.base64prefix,elapsedTimeInSeconds:s/1e3,alt:e.alt,initialSizeInMb:g.size(e.startSize).MB,endSizeInMb:g.size(e.finalSize).MB,ext:e.ext,quality:e.quality,endWidthInPx:e.endWidth,endHeightInPx:e.endHeight,initialWidthInPx:e.startWidth,initialHeightInPx:e.startHeight,sizeReducedInPercent:(e.startSize-e.finalSize)/e.startSize*100,iterations:e.iterations}}}var N=new y,_={data:function(){return{}},props:["value"],mounted:function(){var e=this;N.attach("#actual-btn",{size:.051,quality:.75}).then((function(t){var a=t[0];e.$emit("input",a.prefix+a.data),console.log(a.data.length)}))},methods:{pickImage:function(){this.$refs["image-uploader"].click()}}},H=_,W=(a("5047"),a("2877")),R=Object(W["a"])(H,i,n,!1,null,"3996b77a",null);t["a"]=R.exports},cf36:function(e,t,a){"use strict";a("ae2d")},e105:function(e,t,a){"use strict";a("a5c2")}}]);
//# sourceMappingURL=chunk-137931b3.041edf22.js.map