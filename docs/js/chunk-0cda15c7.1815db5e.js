(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cda15c7"],{2154:function(t,e,n){"use strict";n("4d9d")},"4d9d":function(t,e,n){},5047:function(t,e,n){"use strict";n("a732")},"73c5":function(t,e,n){"use strict";var r=n("1da1"),a=(n("96cf"),n("5ce5"));e["a"]={updateProduct:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].post("products/update",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getAllProducts:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("products");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getProduct:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("products/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),deleteProduct:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].delete("products/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),getAllProductOptions:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a["a"].get("options/".concat(e,"/all"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},"9f83":function(t,e,n){"use strict";n("b333")},a434:function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("23cb"),o=n("5926"),s=n("07fa"),c=n("7b0b"),u=n("65f0"),l=n("8418"),d=n("1dde"),p=d("splice"),h=a.TypeError,m=Math.max,f=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var n,r,a,d,p,w,v=c(this),x=s(v),P=i(t,x),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=x-P):(n=y-2,r=f(m(o(e),0),x-P)),x+n-r>g)throw h(b);for(a=u(v,r),d=0;d<r;d++)p=P+d,p in v&&l(a,d,v[p]);if(a.length=r,n<r){for(d=P;d<x-r;d++)p=d+r,w=d+n,p in v?v[w]=v[p]:delete v[w];for(d=x;d>x-r+n;d--)delete v[d-1]}else if(n>r)for(d=x-r;d>P;d--)p=d+r-1,w=d+n-1,p in v?v[w]=v[p]:delete v[w];for(d=0;d<n;d++)v[d+P]=arguments[d+2];return v.length=x-r+n,a}})},a5c2:function(t,e,n){},a732:function(t,e,n){},b333:function(t,e,n){},b715:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"box"}},[n("div",{attrs:{id:"box-title"},on:{click:t.toggleCollapse}},[t._v(" "+t._s(t.title)+" "),t.collapsable?n("span",{class:{collapsed:t.isCollapsed},attrs:{id:"collapser"}},[n("unicon",{attrs:{name:"angle-double-up"}})],1):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCollapsed,expression:"!isCollapsed"}],attrs:{id:"box-body"}},[t._t("default")],2)])},a=[],i={props:{title:{type:String,default:""},collapsable:{type:Boolean,default:!1}},data:function(){return{isCollapsed:!1}},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed}}},o=i,s=(n("e105"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"2c986695",null);e["a"]=c.exports},bf2e:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"image-uploader",attrs:{type:"file",id:"actual-btn",hidden:""}}),n("div",{staticClass:"image-picker-overlay box",style:"background: url("+t.value+") no-repeat;",on:{click:t.pickImage}},[n("unicon",{staticClass:"content",attrs:{name:"camera"}})],1)])},a=[];n("96cf");const i=t=>{const e=t.replace(/^data:image\/\w+;base64,/,"").length;return(e-814)/1.37},o=t=>t.split(";")[0].match(/jpeg|png|gif/)[0],s=t=>t.replace(/^data:image\/\w+;base64,/,""),c=t=>`data:${t};base64,`;var u={size:i,mime:o,data:s,prefix:c};const l=(t,e="image/jpeg")=>{const n=window.atob(t),r=[];for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return new window.Blob([new Uint8Array(r)],{type:e})},d=(t,e,n)=>{const r=document.createElement("canvas"),a=r.getContext("2d");return r.width=t,r.height=e,i=>{if(!n||n>8)return a.drawImage(i,0,0,r.width,r.height),r;switch(n>4&&(r.width=e,r.height=t),n){case 2:a.translate(t,0),a.scale(-1,1);break;case 3:a.translate(t,e),a.rotate(Math.PI);break;case 4:a.translate(0,e),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-e);break;case 7:a.rotate(.5*Math.PI),a.translate(t,-e),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-t,0);break}return n>4?a.drawImage(i,0,0,r.height,r.width):a.drawImage(i,0,0,r.width,r.height),r}},p=(t,e=.75)=>{const n=t.toDataURL("image/jpeg",e);return n},h=t=>({KB:t/1e3,MB:t/1e6});var m={base64ToFile:l,imageToCanvas:d,canvasToBase64:p,size:h};const f=t=>new Promise((e,n)=>{const r=new window.FileReader;r.addEventListener("load",t=>e(t.target.result),!1),r.addEventListener("error",n,!1),r.readAsDataURL(t)});var g={load:f};const b=t=>new Promise((e,n)=>{const r=new window.Image;r.addEventListener("load",()=>e(r),!1),r.addEventListener("error",n,!1),r.src=t}),w=(t,e)=>(n,r)=>{if(!t&&!e)return{width:n,height:r};const a=n/r,i=t/e;let o,s;return a>i?(o=Math.min(n,t),s=o/a):(s=Math.min(r,e),o=s*a),{width:o,height:s}};var v={load:b,resize:w};class x{constructor({quality:t=.75,size:e=2,maxWidth:n=1920,maxHeight:r=1920,resize:a=!0,rotate:i=!1}){this.start=window.performance.now(),this.end=null,this.alt=null,this.ext=null,this.startSize=null,this.startWidth=null,this.startHeight=null,this.size=1e3*e*1e3,this.endSize=null,this.endWidth=null,this.endHeight=null,this.iterations=0,this.base64prefix=null,this.quality=t,this.resize=a,this.maxWidth=n,this.maxHeight=r,this.orientation=1,this.rotate=i}}var P=x;const y=t=>new Promise(e=>{const n=new window.FileReader;n.onload=function(t){var n=new DataView(t.target.result);65496!==n.getUint16(0,!1)&&e(-2);const r=n.byteLength;let a=2;while(a<r){const t=n.getUint16(a,!1);if(a+=2,65505===t){1165519206!==n.getUint32(a+=2,!1)&&e(-1);const t=18761===n.getUint16(a+=6,!1);a+=n.getUint32(a+4,t);const r=n.getUint16(a,t);a+=2;for(let i=0;i<r;i++)274===n.getUint16(a+12*i,t)&&e(n.getUint16(a+12*i+8,t))}else{if(65280!==(65280&t))break;a+=n.getUint16(a,!1)}}e(-1)},n.readAsArrayBuffer(t.slice(0,65536))});var k={orientation:y};class z{attach(t,e){return new Promise(n=>{const r=document.querySelector(t);r.setAttribute("accept","image/*"),r.addEventListener("change",t=>{const r=this.compress([...t.target.files],e);n(r)},!1)})}compress(t,e){return Promise.all(t.map(t=>O(t,e)))}static convertBase64ToFile(t,e){return m.base64ToFile(t,e)}}function I(t,e,n=1,r,a=1,i=1){const o=m.canvasToBase64(t,n),s=u.size(o);return s>r||n>a?I(t,s,n-.1,r,a,i+1):o}async function O(t,e){const n=new P(e);return n.start=window.performance.now(),n.alt=t.name,n.ext=t.type,n.startSize=t.size,n.orientation=n.rotate?await k.orientation(t):0,_(n)(await g.load(t))}function _(t){return async e=>{const n=await v.load(e);if(t.startWidth=n.naturalWidth,t.startHeight=n.naturalHeight,t.resize){const{width:e,height:r}=v.resize(t.maxWidth,t.maxHeight)(n.naturalWidth,n.naturalHeight);t.endWidth=e,t.endHeight=r}else t.endWidth=n.naturalWidth,t.endHeight=n.naturalHeight;const r=m.imageToCanvas(t.endWidth,t.endHeight,t.orientation)(n);t.iterations=1,t.base64prefix=u.prefix(t.ext);const a=await I(r,t.startSize,t.quality,t.size,t.minQuality,t.iterations);t.finalSize=u.size(a),t.end=window.performance.now();const i=t.end-t.start;return{data:u.data(a),prefix:t.base64prefix,elapsedTimeInSeconds:i/1e3,alt:t.alt,initialSizeInMb:m.size(t.startSize).MB,endSizeInMb:m.size(t.finalSize).MB,ext:t.ext,quality:t.quality,endWidthInPx:t.endWidth,endHeightInPx:t.endHeight,initialWidthInPx:t.startWidth,initialHeightInPx:t.startHeight,sizeReducedInPercent:(t.startSize-t.finalSize)/t.startSize*100,iterations:t.iterations}}}var R=new z,B={data:function(){return{}},props:["value"],mounted:function(){var t=this;R.attach("#actual-btn",{size:.051,quality:.75}).then((function(e){var n=e[0];t.$emit("input",n.prefix+n.data),console.log(n.data.length)}))},methods:{pickImage:function(){this.$refs["image-uploader"].click()}}},H=B,S=(n("5047"),n("2877")),W=Object(S["a"])(H,r,a,!1,null,"3996b77a",null);e["a"]=W.exports},cf46:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[n("thead",[t._t("head")],2),n("tbody",[t._t("body")],2)])},a=[],i={name:"Table.vue"},o=i,s=(n("9f83"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"2108937e",null);e["a"]=c.exports},e105:function(t,e,n){"use strict";n("a5c2")},f246:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"product"}},[n("Box",{attrs:{title:"General information",collapsable:""}},[n("div",{attrs:{id:"general-product-info"}},[t._v(" Product name "),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),n("br"),n("br"),t._v(" Product description "),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}}),n("br"),n("br"),t._v(" Product image "),n("br"),n("ImageUploader",{attrs:{id:"image-uploader"},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1)]),n("Box",{attrs:{title:"Pricing",collapsable:""}},[n("div",{attrs:{id:"product-pricing-info"}},[n("div",[t._v(" Base price:     "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.basePrice,expression:"form.basePrice"}],attrs:{type:"number",placeholder:"€ 0.00"},domProps:{value:t.form.basePrice},on:{input:function(e){e.target.composing||t.$set(t.form,"basePrice",e.target.value)}}})])])]),n("button",{staticClass:"btn add text",on:{click:t.submitForm}},[n("unicon",{attrs:{name:t.form.id?"save":"plus",fill:"white"}}),t._v(" "+t._s(t.form.id?"Edit":"Add")+" product ")],1)],1)},a=[],i=n("1da1"),o=(n("a434"),n("96cf"),n("b715")),s=n("cf46"),c=n("bf2e"),u=n("73c5"),l={components:{Box:o["a"],Table:s["a"],ImageUploader:c["a"]},data:function(){return{form:{id:null,name:"",description:"",image:"",basePrice:0},productOptions:[]}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.params.productId,"new"===n){e.next=14;break}return e.prev=2,e.next=5,u["a"].getProduct(n);case 5:return t.form=e.sent,e.next=8,u["a"].getAllProductOptions(n);case 8:t.productOptions=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),notifications.add("error","Something went wrong retrieving this product");case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},methods:{submitForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].updateProduct(t.form);case 2:return e.next=4,t.$router.push("/rms/products");case 4:t.$router.go(1),notifications.add("info","New product created");case 6:case"end":return e.stop()}}),e)})))()},addBinaryProductOption:function(){this.productOptions.binaryProductOptions.push({id:null,name:"",additionalPrice:0})},removeBinaryProductOption:function(t){this.productOptions.binaryProductOptions.splice(t,1)}}},d=l,p=(n("2154"),n("2877")),h=Object(p["a"])(d,r,a,!1,null,"91b41f4c",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-0cda15c7.1815db5e.js.map